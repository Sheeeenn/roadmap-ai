name: Deploy to Hostinger
on:
  push:
    branches:
      - master
jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v2
      - name: Set up FTP
        run: sudo apt-get install -y lftp
      - name: Deploy to Hostinger via FTP
        env:
          FTP_SERVER: ${{ secrets.FTP_SERVER }}
          FTP_USERNAME: ${{ secrets.FTP_USERNAME }}
          FTP_PASSWORD: ${{ secrets.FTP_PASSWORD }}
        run: |
          lftp -f "
          open ftp://$FTP_USERNAME:$FTP_PASSWORD@$FTP_SERVER
          set ftp:passive-mode true  # Enable passive mode if needed
          set net:timeout 300  # Increase timeout to 5 minutes
          mirror -R ./ /public_html/TestEnvironment --delete --parallel=5  # Enable parallel transfers (5 connections)
          quit
          "
